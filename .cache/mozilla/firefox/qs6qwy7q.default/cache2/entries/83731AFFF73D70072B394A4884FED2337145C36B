function loc() {
  switch (window.location.pathname) {
    case '/':
      return "/splash/";
    break;

    default:
      return window.location.pathname + window.location.hash;
    break;
  }
}
function lowResolution() {
  var width = $(window).width();
  if (width <= 1024)
    return true;
  return false;
}

  var createdNetworkId = null;

  function generateCourseNumber(email) {
    var courseNumber = email;
    var parts = email.split("@");
    if (parts.length == 2) {
      courseNumber = parts[0];
    }
    return courseNumber;
  }

  function redirectToDashboard() {
    //alert("redirecting to dashboard");
    setTimeout('window.location = "'+ dashboardPath +'"', 200);
  }

  function autoLoginAndEnroll() {
    var theInputData = {nid : createdNetworkId, permission : 15};
    PA.call_pj("user.login_and_enroll", theInputData, null, function(data) {
      redirectToDashboard();
    }, function (err) {
      alert(err);
    });
  }

  function isValidEmailAddress(emailAddress) {
    var pattern = new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i);
    return pattern.test(emailAddress);
  }

  function isValidPassword(password) {
    if (password && password.length >= 0) {
      return true;
    }
    return false;
  }

  function doLoginError(theField,msg) {
    //add error class to container div
    $(theField).closest('.formField').addClass('has_error');

    //stick error message right after field
    $(theField).after('<div class="error">'+msg+'</div>');
  }
  function clearError(theField) {
    //remove error class from container div
    $(theField).closest('.formField').removeClass('has_error');

    //remove error message
    $(theField).siblings('.error').remove();
  }

$(document).ready(function() {
   $("#fancyDashboardClose").live('click',function(){
      $.fancybox.close();
      $(this).remove();
      return false;
   });

  var opened = 0;
  //$('a[rel=fancybox-dashboard]').fancybox();
  $('a[rel=fancybox-dashboard]').click(function(e){
    e.preventDefault();
    if (lowResolution()) {
      window.location = "/sandbox/tutorial";
    } else {
      $.fancybox({
        'autoScale'		: false,
        'title'			: this.title,
        'width'			: '100%',
        'height'		: '100%',
        'autoDimensions': false,
        'href'			: "/sandbox/tutorial2?close=fancy",
        'type'			: 'iframe',
        'showCloseButton' : false,
        'closeBtn': false,
        'onClosed'  : function() {
        $("#fancyDashboardClose").remove();
          var dur = (new Date()).getTime() - opened;
          dur = dur / 1000;
          var data = {'view_time': dur};
          PA.trackEvent(true, 'try_it_now_closed', loc(), data);

          //TODO track how long it was open
          //pageTracker._trackPageview("/index");
          //PA.trackEvent(true, 'try_it_now_closed', loc(), data);
        }
      });
      //pageTracker._trackPageview("try_it_now"); //old GA tracking
      // _gaq.push(['_trackPageview', 'try_it_now']); //new GA tracking
      //PA.trackEvent(true, 'try_it_now', loc());
      opened = (new Date()).getTime();
    }
    return false;
  });

  $('a[rel=fancybox-dashboard-warm]').click(function(){
    if (lowResolution()) {
      window.location = "/sandbox/warm";
    } else {
      $.fancybox({
        'autoScale'		: false,
        'title'			: this.title,
        'width'			: '100%',
        'height'		: '100%',
        'autoDimensions': false,
        'href'			: "/sandbox/tutorial2?close=fancy",
        'type'			: 'iframe',
        'closeBtn' : false,
        'showCloseButton': false,
        'onClosed'  : function() {
        $("#fancyDashboardClose").remove();
          var dur = (new Date()).getTime() - opened;
          dur = dur / 1000;
          var data = {'view_time': dur};
          PA.trackEvent(true, 'try_it_now_warm_closed', loc(), data);
        }
      });
      dataLayer.push({'event': 'VPTracker', 'VPageView':  '/try_it_now'});
      opened = (new Date()).getTime();
    }
    return false;
  });

  $('a[rel=fancybox-dashboard-faq]').click(function(){
    if (lowResolution()) {
      window.location = "/modules/inst_faq?close=fancy";
    } else {
      $.fancybox({
        'autoScale'		: false,
        'title'			: this.title,
        'width'			: '100%',
        'height'		: '100%',
        'autoDimensions': false,
        'href'			: "/modules/inst_faq?close=fancy",
        'type'			: 'iframe',
        'showCloseButton' : false,
        'closeBtn': false,
        'onClosed'  : function() {
        $("#fancyDashboardClose").remove();
          var dur = (new Date()).getTime() - opened;
          dur = dur / 1000;
          var data = {'view_time': dur};
          PA.trackEvent(true, 'faq_closed', loc(), data);
        }
      });
      PA.trackEvent(true, 'instructor_faq', loc());
      opened = (new Date()).getTime();
    }
    return false;
  });

  $('#FallReminderButton').click(function() {
    PA.trackEvent(true, 'signup_reminder_shown', loc());
  });

  $('#HeaderButtonReminder').click(function() {
    PA.trackEvent(true, 'signup_reminder_shown', loc());
  });

  $('a[rel=fancybox]').fancybox({
    'centerOnScroll': true,
    'hideOnOverlayClick': false
  });

  $('div[rel=fancybox-amazon]').click(function() {
    var id = $(this).attr("id");
    var vid = $(this).attr("rev");
    jwplayer('OverviewVideo').setup({
      levels: [
        { file: 'https://d26vy68u0k3u92.cloudfront.net/homepage/piazza-'+vid+'-480.mp4' },
        { file: 'https://d26vy68u0k3u92.cloudfront.net/homepage/piazza-'+vid+'-480.ogv' },
        { file: 'https://d26vy68u0k3u92.cloudfront.net/homepage/piazza-'+vid+'-480.webm' }
      ],
      'centerOnScroll': true,
      'controlbar': 'over',
      'bufferlength': '5',
      'autostart': 'true',
      'width': '640',
      'height': '360',
      'modes': [
        {type: 'html5'},
        {type: 'download'}
      ]
    });

    $.fancybox({
      'autoScale'		: false,
      'title'			: this.title,
      'width'			: 640,
      'height'		    : 360,
      'autoDimensions'  : false,
      'href'			: "#OverviewVideo",
      'type'			: 'inline',
      'onClosed'                : function() {
        var dur = (new Date()).getTime() - opened;
        dur = dur / 1000;
        var data = {'view_time': dur};
        PA.trackEvent(true, "video_closed/"+id, loc(), data);
      }
    });

    var video_name = id;
    if (video_name == "WatchVideoButton")
      video_name = "WelcomeToPiazza";

    //pageTracker._trackPageview("video_view/" + video_name);
    //_gaq.push(['_trackPageview', 'video_view/' + video_name]); //new GA tracking


    PA.trackEvent(true, "video_view/" + video_name, loc());
    opened = (new Date()).getTime();
    //pageTracker._trackPageview("/video_view/" + name_video($(this)));
  });
  $('a[rel=fancybox-amazon]').click(function() {
    var id = $(this).attr("id");
    if (id == "WatchVideoProduct")
      PA.call_pj("generic.event_to_requests", {event: "homepage.watch_video_product"},1);
    var vid = $(this).attr("rev");
    var domain = 'https://d26vy68u0k3u92.cloudfront.net/';
    // not all videos that are loaded using this code are actually in the same place, so we need to have some weird logic here
    if(vid === 'intro') {
      domain = domain + 'piazza-intro';
    } else {
      domain = domain + 'help';
    }
    if(vid !== 'tags') {
      domain = domain + '/piazza-';
    } else {
      domain = domain + '/';
    }
    domain = domain + vid + (vid === 'tags' ? '' : '-480') + '.';
    jwplayer('OverviewVideo').setup({
      levels: [
        { file: domain + 'mp4' },
        { file: domain + 'ogv' },
        { file: domain + 'webm' }
      ],
      'centerOnScroll': true,
      'controlbar': 'over',
      'bufferlength': '5',
      'autostart': 'true',
      'width': '640',
      'height': '360',
      'modes': [
        {type: 'html5'},
        {type: 'download'}
      ]
    });

    $.fancybox({
      'autoScale'		: false,
      'title'			  : this.title,
      'width'       : 640,
      'height'      : 360,
      'autoDimensions'  : true,
      'href'			: "#OverviewVideo_wrapper",
      'type'			: 'inline',
      'onClosed'                : function() {
        var dur = (new Date()).getTime() - opened;
        dur = dur / 1000;
        var data = {'view_time': dur};
        PA.trackEvent(true, "video_closed/"+id, loc(), data);
      }
    });

    var video_name = id;
    if (video_name == "WatchVideoButton")
      video_name = "WelcomeToPiazza";

    //pageTracker._trackPageview("video_view/" + video_name);
    dataLayer.push({'event': 'VPTracker', 'VPageView':  '/video_view/' + video_name});


    PA.trackEvent(true, "video_view/" + video_name, loc());
    opened = (new Date()).getTime();
    //pageTracker._trackPageview("/video_view/" + name_video($(this)));
    return false;
  });

});

function submitFallReminder() {
  var valid = validateFallReminderForm();

  // Show a "Thank You" message if there were no errors.
  //if (valid) {
  //  PA.trackEvent(true, "signup_reminder", loc());
  //  $('#FallReminderForm').find('.form').hide();
  //  var name  = $('#FallReminderName').val();
  //  var email = $('#FallReminderEmail').val();
  //  PA.call("user.fall_reminder", {email:email, name:name}, 1);
  //  $('#jobs-form-reminder').slideUp();
  //  $('#jobs-block-reminder-thanks').slideDown().delay(2000).queue(function() {
  //    $.fancybox.close();
  //  });
  //}
}
function resetFallReminderForm() {
  var form = $('#FallReminderForm');
  form.find('.thankYou').hide();
  form.find('.form').show();
  form.find('input[type="text"]').val('');
  form.find('.errorMessage').hide();
}
function validateFallReminderForm() {
  var valid = true;

  // Retrieve the user's input.
  var name  = $('#FallReminderName').val();
  var email = $('#FallReminderEmail').val();

  // Validate the name input.
  if (name.length == 0) {
    $('#FallReminderForm').find('.errorMessage.name').show();
    valid = false;
  } else {
    $('#FallReminderForm').find('.errorMessage.name').hide();
  }

  // Validate the email input.
  if (!validateEmail(email)) {
    $('#FallReminderForm').find('.errorMessage.email').show();
    valid = false;
  } else {
    $('#FallReminderForm').find('.errorMessage.email').hide();
  }

  return valid;
}
function validateEmail(email) {
  var reg = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
  return email.match(reg);
}
ÓwﬁK÷      ]¶
Õ]¶
Õ@Ít]ŒÈ@   .    :https://piazza.com/js/splash/splash.js?v=2609 necko:classified 1 strongly-framed 1 security-info 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 request-method GET response-head HTTP/1.1 200 OK
Accept-Ranges: bytes
Cache-Control: max-age=2678400
Content-Type: application/javascript
Date: Tue, 15 Oct 2019 18:06:57 GMT
ETag: "5da4b67d-2c7b"
Expires: Fri, 15 Nov 2019 18:06:57 GMT
Last-Modified: Mon, 14 Oct 2019 17:55:09 GMT
Server: nginx
Content-Length: 11387
 original-response-headers Accept-Ranges: bytes
Cache-Control: max-age=2678400
Content-Type: application/javascript
Date: Tue, 15 Oct 2019 18:06:57 GMT
ETag: "5da4b67d-2c7b"
Expires: Fri, 15 Nov 2019 18:06:57 GMT
Last-Modified: Mon, 14 Oct 2019 17:55:09 GMT
Server: nginx
Content-Length: 11387
Connection: keep-alive
 uncompressed-len 0 net-response-time-onstart 366 net-response-time-onstop 366   ,{